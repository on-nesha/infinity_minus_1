<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Function-Call Scrapbook — Tree View</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Mono&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#071022; --panel:#0b1220; --muted:#93a3b8; --accent:#ff7b72;
    --card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#061225 0%, #071022 100%); color:#e6eef8; min-height:100vh;
  }
  header{padding:26px 20px; text-align:center}
  header h1{margin:0;font-weight:800;letter-spacing:0.4px}
  header p{margin:6px 0 0;color:var(--muted);font-size:14px}
  .wrap{max-width:1100px;margin:26px auto;padding:18px;display:grid;grid-template-columns:320px 1fr;gap:18px}
  .left{
    background:var(--panel); border-radius:12px; padding:16px; box-shadow:0 8px 30px rgba(2,6,23,0.6);
  }
  .btn{display:block;width:100%;padding:12px 14px;border-radius:10px;border:none;background:#0b3040;color:#e6f8ff;font-weight:700;margin-bottom:10px;cursor:pointer;text-align:left}
  .btn:hover{transform:translateY(-2px)}
  .actions{display:flex;gap:8px;margin-top:12px}
  .small{padding:8px 10px;font-size:13px}
  .right{
    background: var(--card); border-radius:12px;padding:18px;min-height:60vh; overflow:auto;
  }

  /* Tree styles */
  .tree-root{margin:6px 0 0;}
  .node {
    background: rgba(255,255,255,0.02);
    border-radius:8px;
    padding:10px;
    margin-bottom:10px;
    border-left:4px solid rgba(255,255,255,0.03);
  }
  .node-title {
    display:flex; align-items:center; gap:10px; cursor:pointer;
  }
  .chev{font-family:Roboto Mono, monospace;color:var(--muted); width:18px; text-align:center}
  .node-key{font-family:Roboto Mono, monospace; font-weight:700; color:#fff}
  .node-meta{color:var(--muted); font-size:13px; margin-left:auto}
  .node-body{margin-top:10px; display:none; padding-left:28px}
  .kv{margin:6px 0; color:#cfe9ff}
  .kv .k{font-weight:700;color:#dff3ff;font-family:Roboto Mono, monospace}
  .kv .v{margin-left:8px;color:#cfe9ff}
  .thumb-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .thumbnail{width:88px;height:64px;object-fit:cover;border-radius:8px;cursor:pointer;border:2px solid rgba(255,255,255,0.04)}
  .array-item{margin-left:6px;color:#cfe9ff}

  .codepanel{background:#061226;padding:12px;border-radius:8px; font-family:Roboto Mono, monospace; font-size:13px;color:#d9eefc; white-space:pre-wrap; overflow:auto; max-height:420px}
  .topbar{display:flex;gap:8px;align-items:center;margin-bottom:12px}
  .search{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
  .copybtn{background:#173447;border:none;padding:8px;border-radius:8px;color:#cfeffc;cursor:pointer}

  .modal{position:fixed;inset:0;background:rgba(2,6,23,0.75);display:flex;align-items:center;justify-content:center;z-index:60; display:none}
  .modal .imgwrap{max-width:92vw;max-height:86vh;padding:14px;background:#061826;border-radius:10px}
  .modal img{max-width:100%;max-height:78vh;border-radius:8px;display:block}
  .meta{color:var(--muted);font-size:13px;margin-top:8px}

  footer{margin:26px auto;text-align:center;color:var(--muted);font-size:13px}
  @media (max-width:880px){ .wrap{grid-template-columns:1fr; padding:10px} .left{order:2} .right{order:1} }
</style>
</head>
<body>
<header>
  <h1>LoveJourney — DSGraph Tree View</h1>
  <p>Click any node to expand. Click thumbnails to view full-size. Use search to filter nodes.</p>
</header>

<div class="wrap">
  <div class="left">
    <strong style="display:block;margin-bottom:8px">Functions / Controls</strong>

    <button class="btn" onclick="showNode('foundation')">showFoundation()</button>
    <button class="btn" onclick="showNode('emotionalGraph')">showEmotionalGraph()</button>
    <button class="btn" onclick="showNode('adventures')">showAdventures()</button>
    <button class="btn" onclick="showNode('thingsILoveAboutHim')">showThingsILoveAboutHim()</button>
    <button class="btn" onclick="showNode('output')">showRelationshipOutput()</button>

    <div style="margin-top:12px"><strong>Actions</strong></div>
    <div class="actions" style="margin-top:8px">
      <button class="btn small" onclick="expandAll()">Expand All</button>
      <button class="btn small" onclick="collapseAll()">Collapse All</button>
    </div>

    <div style="margin-top:12px"><strong>Load / Save</strong></div>
    <div style="margin-top:8px">
      <input id="jsonUpload" type="file" accept=".json" style="display:none" onchange="handleJsonUpload(event)">
      <button class="btn small" onclick="document.getElementById('jsonUpload').click()">Load JSON file</button>
      <button class="btn small" onclick="downloadJSON()">Download JSON</button>
    </div>

    <div style="margin-top:12px"><strong>Usage tip</strong>
      <p style="margin:6px 0;color:var(--muted);font-size:13px">Because your images are in the repo root, use filenames like <code>jojo_nee1.jpg</code> in the JSON <code>photo</code> fields. If you later move them to <code>images/</code>, update paths accordingly.</p>
    </div>
  </div>

  <div class="right">
    <div class="topbar">
      <input id="filter" class="search" placeholder="Filter nodes (e.g. nepal, gorur, alps)..." oninput="filterNodes()">
      <button class="copybtn" onclick="copyJSON()">Copy JSON</button>
      <button class="copybtn" onclick="toggleJSON()">Toggle JSON View</button>
    </div>

    <div id="tree" class="tree-root"></div>

    <div id="jsonPanel" style="margin-top:18px; display:none">
      <h3 style="margin:6px 0">Raw JSON</h3>
      <div id="jsonView" class="codepanel"></div>
    </div>
  </div>
</div>

<div class="modal" id="modal" onclick="closeModal(event)">
  <div class="imgwrap" id="modalWrap">
    <img id="modalImg" alt="photo">
    <div class="meta" id="modalMeta"></div>
  </div>
</div>

<footer>
  Made with love ♥ — Hosted on GitHub Pages
</footer>

<script>
/* =========================
   Default scrapbook object
   Edit these filenames/values if needed
   ========================= */
let scrapbook = {
  "function":"Infinity^(infinity+1)_Year1",
  "arguments":{
    "foundation":{
      "friendship":{"person":"classmate-friends","impact":"awesome Jojo, super-cool Jojo, amazing Jojo","photo":"jojo_nee1.jpg"},
      "lovey_dovey":{"status":"boyfriend","impact":"Nesha fell head over heels for you","photo":"jojo_nee2.jpg"},
      "moveToGermany":{"person":"husband","impact":"new beginnings, new challenges","photo":"jojo_nee3.jpg"},
      "buildLifeTogether":{"status":"in_progress","feeling":"exciting + meaningful","photo":"jojo_nee4.jpg"}
    },
    "emotionalGraph":{
      "uglyFights":{"occurrences":"some","effect":"made us stronger, taught us to communicate better","photo":"jojo_nee1.jpg"},
      "awesomeMoments":{"description":"many many wonderful memories","effect":"deepened our love","photo":"jojo_nee2.jpg"}
    },
    "adventures":{
      "honeymoon_Nepal":{"location":"Mardi Himal Base Camp","type":"our first himalayan trek together","feelings":["magic","machapucchuare","altitude sickness","jongi-paggaaaa"],"photo":"jojo_nee3.jpg"},
      "hike_Alps":{"feelings":["du bist meine frau","exhausted","connected","our first snow-fight"],"photo":"jojo_nee4.jpg"},
      "bikeTrail_Dresden":{"description":"biking with bubbuu, flower picking, bubbu ke dhakka diye fele deya","photo":"jojo_nee1.jpg"}
    },
    "thingsILoveAboutHim":{
      "foodPassion":{"gorur_mangsho":"his #1 love language in food form","photo":"jojo_nee2.jpg"},
      "startupPassion":{"ai_startup":"I admire his drive + brilliance + purpose + passion + boss-man Jojo","photo":"jojo_nee3.jpg"},
      "cookingForMe":{"effectOnMe":["my heart melts","my soul feels at home","my stomach is HAPPY"],"photo":"jojo_nee4.jpg"}
    },
    "output":{"relationshipStatus":"real, imperfect, growing, beautiful","connection":"stronger than ever","prediction_Year2":"more adventures, more love, more us","photo":"jojo_nee1.jpg"}
  }
};

/* =========================
   Render tree
   ========================= */
const treeEl = document.getElementById('tree');
const jsonView = document.getElementById('jsonView');
const jsonPanel = document.getElementById('jsonPanel');

function prettyJSON(obj){ return JSON.stringify(obj, null, 2); }
function renderJSONView(){ jsonView.textContent = prettyJSON(scrapbook); }

function clearTree(){ treeEl.innerHTML = ''; }

// Create a collapsible node (recursively)
function createTreeNode(key, value) {
  const container = document.createElement('div');
  container.className = 'node';

  // Title bar
  const title = document.createElement('div');
  title.className = 'node-title';
  const chev = document.createElement('div'); chev.className = 'chev'; chev.textContent = '▶';
  const kEl = document.createElement('div'); kEl.className = 'node-key'; kEl.textContent = key;
  const meta = document.createElement('div'); meta.className = 'node-meta';

  // if value is object, show small summary
  if (value && typeof value === 'object' && !Array.isArray(value)) {
    const subCount = Object.keys(value).length;
    meta.textContent = `${subCount} item${subCount>1?'s':''}`;
  } else if (Array.isArray(value)) {
    meta.textContent = `${value.length} item${value.length>1?'s':''}`;
  } else {
    meta.textContent = String(value);
  }

  title.appendChild(chev);
  title.appendChild(kEl);
  title.appendChild(meta);
  container.appendChild(title);

  // Body (hidden by default)
  const body = document.createElement('div');
  body.className = 'node-body';

  // Populate body depending on type
  if (value && typeof value === 'object' && !Array.isArray(value)) {
    Object.entries(value).forEach(([subK, subV])=>{
      // special: photo -> thumbnail
      if (subK === 'photo' && subV) {
        const thumbRow = document.createElement('div'); thumbRow.className = 'thumb-row';
        const img = document.createElement('img'); img.className = 'thumbnail'; img.src = subV; img.alt = key + ' photo';
        img.onerror = ()=>{ img.style.display='none'; };
        img.onclick = (e)=>{ e.stopPropagation(); openModal(subV, `${key} — ${subK}`); };
        thumbRow.appendChild(img);
        body.appendChild(thumbRow);
        return;
      }

      // if primitive
      if (typeof subV === 'string' || typeof subV === 'number') {
        const kv = document.createElement('div'); kv.className = 'kv';
        kv.innerHTML = `<span class="k">${subK}:</span> <span class="v">${subV}</span>`;
        body.appendChild(kv);
      } else if (Array.isArray(subV)) {
        const kv = document.createElement('div'); kv.className = 'kv';
        kv.innerHTML = `<span class="k">${subK}:</span>`;
        const arrWrap = document.createElement('div');
        subV.forEach(item=>{
          const itemEl = document.createElement('div'); itemEl.className='array-item'; itemEl.textContent = `• ${item}`;
          arrWrap.appendChild(itemEl);
        });
        kv.appendChild(arrWrap);
        body.appendChild(kv);
      } else if (typeof subV === 'object' && subV !== null) {
        // nested object -> render nested subnode
        const nested = createTreeNode(subK, subV);
        nested.style.marginTop = '8px';
        nested.style.marginLeft = '8px';
        body.appendChild(nested);
      }
    });
  } else if (Array.isArray(value)) {
    value.forEach(item=>{
      const itemEl = document.createElement('div'); itemEl.className='array-item'; itemEl.textContent = `• ${item}`;
      body.appendChild(itemEl);
    });
  } else {
    const p = document.createElement('div'); p.className='kv'; p.textContent = String(value);
    body.appendChild(p);
  }

  container.appendChild(body);

  // toggle behavior
  title.addEventListener('click', ()=>{
    const open = body.style.display === 'block';
    body.style.display = open ? 'none' : 'block';
    chev.textContent = open ? '▶' : '▼';
  });

  return container;
}

function renderTree() {
  clearTree();
  // header
  const header = document.createElement('div');
  header.style.marginBottom = '8px';
  header.innerHTML = `<div style="font-family:Roboto Mono;font-weight:800;font-size:15px">function ${scrapbook.function}()</div><div style="color:var(--muted);margin-top:6px">${Object.keys(scrapbook.arguments).length} top-level nodes</div>`;
  treeEl.appendChild(header);

  Object.entries(scrapbook.arguments).forEach(([k,v])=>{
    const node = createTreeNode(k, v);
    node.id = 'node-' + k;
    treeEl.appendChild(node);
  });

  renderJSONView();
}
renderTree();

/* =========================
   Modal for images
   ========================= */
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const modalMeta = document.getElementById('modalMeta');

function openModal(src, caption){
  modalImg.src = src;
  modalImg.onerror = ()=>{ modalImg.style.display='none'; modalMeta.textContent='Image not found'; }
  modal.style.display='flex';
  modalMeta.textContent = caption || '';
}
function closeModal(e){
  // close only when clicking backdrop
  if (e.target === modal) {
    modal.style.display='none';
    modalImg.src='';
  }
}

/* =========================
   Controls: show node, expand/collapse, copy download
   ========================= */
function showNode(id){
  const el = document.getElementById('node-' + id);
  if (!el) { alert('Node not found: ' + id); return; }
  const body = el.querySelector('.node-body');
  body.style.display = 'block';
  el.querySelector('.chev').textContent = '▼';
  el.scrollIntoView({behavior:'smooth', block:'center'});
}
function expandAll(){
  document.querySelectorAll('.node .node-body').forEach(b=> b.style.display='block');
  document.querySelectorAll('.node .chev').forEach(c=> c.textContent='▼');
}
function collapseAll(){
  document.querySelectorAll('.node .node-body').forEach(b=> b.style.display='none');
  document.querySelectorAll('.node .chev').forEach(c=> c.textContent='▶');
}
function copyJSON(){
  navigator.clipboard.writeText(prettyJSON(scrapbook)).then(()=> alert('JSON copied to clipboard'));
}
function downloadJSON(){
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(prettyJSON(scrapbook));
  const a = document.createElement('a'); a.href = dataStr; a.download = 'scrapbook.json'; a.click();
}

/* =========================
   JSON upload
   ========================= */
function handleJsonUpload(e){
  const f = e.target.files[0];
  if (!f) return;
  const reader = new FileReader();
  reader.onload = function(evt){
    try {
      const obj = JSON.parse(evt.target.result);
      scrapbook = obj;
      renderTree();
      alert('JSON loaded successfully');
    } catch(err){
      alert('Invalid JSON: ' + err.message);
    }
  };
  reader.readAsText(f);
}

/* =========================
   Filter nodes
   ========================= */
function filterNodes(){
  const q = document.getElementById('filter').value.toLowerCase().trim();
  document.querySelectorAll('.node').forEach(n=>{
    // header nodes (with id) only
    if (!n.id) return;
    const text = n.textContent.toLowerCase();
    n.style.display = q === '' || text.includes(q) ? 'block' : 'none';
  });
}

/* =========================
   Toggle JSON view
   ========================= */
function toggleJSON(){
  jsonPanel.style.display = jsonPanel.style.display === 'block' ? 'none' : 'block';
}

/* =========================
   Utility: show JSON pretty on load
   ========================= */
renderJSONView();
</script>
</body>
</html>
